var express = require("express");
var app = express();
var mongoose = require("mongoose");
var bodyParser = require("body-parser");
var methodOverride = require("method-override");
var expressSanitizer = require("express-sanitizer");

mongoose.connect("mongodb://localhost/cars_app",{useNewUrlParser:true});

app.set("view engine","ejs");

app.use(bodyParser.urlencoded({extended:true}));

app.use(express.static("public"));

app.use(bodyParser.urlencoded({extended:true}));

//use expressSanitizer();
app.use(expressSanitizer());
app.use(methodOverride("_method"));



//Create a Schema for Cars
var carSchema = new mongoose.Schema({
    company:String,
    name:String,
    price:String,
    image:String
});

//Compiling the Schema into a Model
var Car = mongoose.model("Car",carSchema);

/*Car.create({
    company:"Mercedes Benz",
    name:"S Class",
    price:"$150000",
    image:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUSExMWFhUXFRYXFxgYGRYYGBYVFxYXFhcVFxUYHSggGBomIBUVITEhJSkrLi4uGB81ODUtNygtLisBCgoKDg0NDw0NFS0ZFiU3Lzc3LTctKysyKzA3MysrNys3NzcrNy03MTIrLjIzKy03Kzc3KzgrNzctNzcrKystK//AABEIALYBFAMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABQIDBAYHCAH/xABPEAACAQIDAwgFBwgGCAcAAAABAgMAEQQSIQUxQQYTIlFhcYGRBxQyUqFCcpKxwdHwIzNDYpPC0uEVY4KisvEWNERTc4OjwwgXJFVkhOL/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQMC/8QAGxEBAQACAwEAAAAAAAAAAAAAAAECERIhQQP/2gAMAwEAAhEDEQA/AO40pSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUqiWVVF2YKOskD66icVyswEZtJjcMp6jNGD5Zr0EzStYl9IWzF34yI/NzN/hBrCl9Kmyh/tLHuhxB+PN2oN0pWjH0s7M4SSH/AJMn2iqT6Wtm+9L+yeg3ulaF/wCbmzuub9karX0s7N9+Uf8AKf7BQb1StMh9KWy2/TsO+GcDzyVdX0mbKJt64vikoHmUsKDbqVEbN5UYKc2hxcEh91ZELfRvf4VL0ClKUClKUClKUClKUClKUClKUClKUClKUClKUClKx8djY4Y2lldURRdmYgADvNBkVrnKnlthMD0ZXzSn2YYxnlbq6Pye9iBXOOVnpQmxJaHZ94otzYgizsP6sfIHb7W72a1PZOEJcrEjSytcs29iT8pmPsjvPnQbbtn0m4+W4hSPCrrYm0svYbnoKezK3fWoY/bWNlP5XHTt2CRkX6EeVfhW3bM5EC+fEvmPuISB/afefC3fWvcucZAjjD4eNFCe2wAzF/dz7yB37z2UGr4nCA3djmPWRc+ZNYl+Ay7r7x9dTfJrZ7YvELECQvtOw+Sg3+JuAO0itz5Y8mMJHC0qIkcl1y3dUU2IvlDEAtb8XoOXpISbVkRwNvJsPifCq5Dx3+IP1GrM2KFgALEXueugu8yOs09X7TWMJq2nAcicbIobKiggEFnGoOoPQzUEAML2/jzq3iIwgve/nW7w+jvEfKmiHdnb90VqHKPAcziOY5xZMgBYruDH5B7RbXvoLWGiMrWZiERczkcBwUdp++rE20IlNkjjsPeBc+d6zZciQKkjsnPsWLKgdgidFeiWW4uHO/iKlcZ6NsmFbFRYtZQIudUc3kDJbMTmLm3RvvoIjGSxtHGeZitYhiAblhqdQR1gi/vW+TWbsPlbicPb1fFSxgWshbnYrDhzUg6I+brUVsw5omj4i9u8XYfDOvewqc5OcglxkJlTFZGDMrIY8wUjUWIcGxBU7uJ6qDpPJf0vq2VMeix3IAniuYrn30PSj+PgK6jBOrqHRgysAVZSCrA7iCNCK8jbX2diMDLzc62v7JHSSRf1SR0hu0O7iK2/kdyzm2aUKXlwrqHkhO9De0jRE7iDe4vYgqTvDAPR1KwtjbWhxUKTwOHjcXBHxUjeGB0IOoNZtApSlApSlApSlApSlApSlApSlAqG5RcqcLggvrEoVm9lBq7doUcO06VVtTlPgsP+fxUEZ6mkQMbdS3ufAV515Y7WixW0JsQJc4Mloz0wnNpYR+0oZRYXIG8k9d6DsmJ9LOAELyJzjyBiiw5Sru9r6HUBRxa+nwrkXKLlBidovzmJe0Sm8cSG0a9v6x/XPhpWvvjEBIsSPlHQFtdxF+ggPyeO83qW2LtqFCZJIHmZbc2gaMR3vqz3JJI4CxH2BsXJzkvJOA73ih4aWdx+qD7K/rHfwHGugYDAxwpkiQKvZvJ62J1Y9prU4vSJFlBaCQMRquh17Dpeqx6QIiLiCXuO/wCAI+NBNcq9s+q4dpAemejH888fAAnw7a4dNPmJJO/ifrrZeWW3nxjqVjZERbBSRfMx6TadyjwrXY4wPbRz3EfzoOoeivZoTDGcjpTMbHiI0OUDxYMfKtL5c4xnx0+Yk5WCKD8lVA0HUDv7zX3A8ssQgWJQyRIuVbHUBR0RcC+vX21j4na0bsXeHMzG7MdSTuuSRrQQ3PVjytrUzLtKL5OHTxUfyqj1+Pjh0+gPtNBGQXJsAT3C9dc9H23Q6equemgJTtTinev1d1c8i2nABYwC3YFHV299fY8fECGRHVgbgjLv7VzWPiKDt+NnEcbyE5QqMxJ0ACgm58q8/bMQub72YgDrJOgrI2jjZZbrzjhW3gu1rHeMtzp2Vl7ITLICNQl2HWSNFPYcxWgscoI82K5tT0UVY1PYgsT5ity5P7aWPBjByRNNHldWObLdHZjltY2sGtv4VojTHPmzqW1zFdRcksbEix4Ctk2fyoEcbJzUjqf/AJGQeOSIfXQRH9HNBIzKbpvW+jdE3XON28C5FSGxeUbbPaVkQSI1uiWK6A3RwQD8lvxarq8qgmsWAwwY/KlLzN4GVtPC1YOJjWdrvLh4y6nPZrIp6VlAFyBbKOzu1oNiwHKyLazjAT4XKJAxWRXLNE6KWDi6Cx0te/GxBBNaztPBvh3lhZunC3OKwHcrkA30ZbNY30S1YWyFbDOZI8SqOVyhlz3ANr7l7BWX6zzkgkmxKyNfpFlkuyFQpHse7ceNBO8iuVj7OkE8YLYSVgs8I/RyWvdL7iQLqeIBU6qCPROzcfHPEk0Th43GZWHEfYeBHAg15a2FGqfk5JYmicc3KM1rpe6yAMBZ0NmHiOJrZOQPLSTZkrQv+VwxbpBTe3VLHw1Frqd+m40HoqlYeydpw4mJZoJBJGw0YfEEbwRuIOoNZlApSlApSlApWi8sfSRDhFtCone9r5ssanX5djm3cNO0VyXb3pF2jirj1gxofkwDmvHPcydnteFB3flHywwWBH/qJ1VrXEYu0h6rRrdrdp0rmu2PTsASMLgyeppnC/8ATQHT+0K5K2DkYk5WJJuTZiSTvJPE9tBsmX/dyfQb7qo2raXpa2rNumSEdUUaj+9JmI8DWuYjaGKxN+exM8otchpJHB1AACE2NyygAddfF2PN/uZPot91Z2z8BiY2DcxMFIIJCE3U7wL2v56UGDj9k8y1v1nU3FiGQi/eLMpB/WqwEqX2nBK7krBiBGNEDRtcL1G1xxPGsTmpF3xSDvRh9lBjJhL1X6jVTYy28W79ProMfQVpgOyrnqVuqrYxZNVc9fjQUNCOuvoU9Z8zWQkJPDzq/Hgus0GEobrbzNXoc176nv8Atv8AdUjHBGOP21eE0Q/yNBDy4ZmNzZewD7T91U+pLxue8/das7Fzk7lsO2sKRvee3kP50FLYdRwA/HWdatsy9d+7WrMmIQdp69/xNWXxh4L5mgvHfutV6LElMxCg3UqQ17WPceyo58dJwVfiftqw+NkPV5UGd624N1yqd3RVRp5VRLiXb2nY95JHlUdzr9fwFM79ZoM5RV0hFK3zkneAFUdwbW/fYVHCWTgTVQnl94/jwoJDm7XH4tVwQDiKjPWJfePkPuqr1yXifgKCS9WHWe7+fCvsa3+QVsbXJve+69vrFRy42TsPn99Z2z9oEsEYWDG177r99Btno95YnZ8zCxKPbnEvodwEg4dlxw38K9EbMx6TxJNGbo4uPqINuIIIPdXlDbWCyso0NrjQg8b20+ca7l6C9qc7gHiPtQzMvergSBvEs/lUHR6UpQK1D0qY2SPAMkIJlnkihQLe5LuMwsN4yhr9lbfXLPSLyxWOVXhAk9TmyyC46LtHYkdoEoX51xwNBoOPwiNhIlZxzhmTDPa9xkGYk8PZX41gzcoUhYxrhZCqnKCpsCB1WFXdqzRK8RViQ2JEra3P5SNwpsR1LbfrbhUdyqw5TGTrHiVC57qHNzZgGB6Q43vu40GaeW0Y/wBikPfIR+5VJ5dJf/Um/an+CoeOLFn2JY27kB+PN1ey7Qvra3zYh3cBQS3+mq7/AFYD/mH+CpGblmsTGJoL5ct7SbmKgsLZd4JK+FQWEbEtIisRZnUHWPcWAO49V6+ybQxDMWOXUk+2NLm9tHoJl/SHAu/Dv4MpquL0kYXdzE3hk/jrWnxuLvpGjD/iP1m26Xur6MZjLf6tEe8uf+7QbdF6RsCd6TDvVT9T1e/0z2W3tqf7UN/qBrTo8RizvwWG8VJ/7lXAcWRf+j8Me6O+p0A0koOlcm9m7Lx4LRwRuobIxEZjINs3UDuI3Vp3KqLCYfFzYbDw2VGVQTI7HMUUkWIN7EkatwraVxo2Vgr2QTNvCKFUzuouFA+SoABO8hes1o/JnZbYqUyOTYks7nQm5uzX943OvaT1UGw7O5HzsVIyAMt7tlZcrA2ISzG5FyLm/dV/1XZcR5uSVp5B7QhUmxG/pEhR1akVi7b26kyLhYS6IbhmQqvOxiwFr6mOwbW1ja50taG2FzihohMMOjkAyFioEVjzmUaFiRlsANeNtSA2/EbRwuHCsmFKZ480TSuCGHE5IWFlsSQcx6qjIOVGIdkEK4e7uqC0YUasBc6mUi7D9IONRfKOfDSyGQSFECKiBE5w5UARUAJQCw10JF79dR7Y6RSBhQwNjlL5GyE3BdYgMqNY8S3XoaDY/SPjIc7RoztZrgu7vlVWG7MxtmIYaAaXtextzgsDu37z31nY4kEh3LyH22JuT3n7KwJCBXOGPGX1p9M+dmpqTpQ7Ab6sri1vVBTNvv3Ul2dp0W16jx7jXTNnJY7q+MgqPwU5U5T+OyssYhrEX0O/QfXVH0W+uhYVZvS9BdzivnODqq3SgqMnZVJ1pSg+2r4ASbAXPAUqT2Lg2k3A6tlv1KBma3foPKgiYnZGyOLV17/w9Y22JxcB+XDHIB/w3Kk/9Va0Xlhyd9XWKVVIVvG3SIGvaFJ8K270AYUttCWQezHhmU9rSSJlHlG3kKg9AUpSgxNr4wQwSzHdHE8h7kUt9leR8LiGOdi5Jkvzl9c+Y5jmB36699epuXjAbNxuY2Hqk4J74mH215JBKnf49dBnYjFlUEYBsCpBvf2WLC2naRvqT26FYrK0WcMq9MFr+yNd9jcWI1GhGnVCSNp37u2pHZHKOeBQi5XTgsguALk2DAhrXJ0vbsqjD5vBnfzqH9bQfBWNXIcFh810xNjfdly+F2K1M/6R4Z/z2AXXe0bBT5BV+LV8DbIfeuJhPXZWHwLGoGyoznuuITRJDrIotaNrEgMbAGxq3lfd65H+3/nWbgsFsoF7Y1xmjZDnil0DWubhQL6W8a+DY+yRv2i/hFIf3DQR/MS/+5KP/sf/ALqvmX47TYd0yn/vVmrs7Yo34zEN3RsPriq8q7DXhiZfhf8Aw0Ec2VR09qS+HON/gc9dbtyR5PLADj8VPI6qt4ueDDLfQzZGYm+tlGhNzpuqEwnKfZkFmw+zyzj2WlIJB4EEs9vCorlJyunxf5w2UHoxrovees9p8LUFzlDtn1ycM5yRC6oN5VN5JFxdmOp17L6VkY7bcfMLhsOSinSV5AoLjiMqFuh18bCwABN9RQk1lwoBv1qic2ltmSSyRv0ALF8io8vzggAVOpBwAuW31jYbZMkjX6X1aeG4ViriyPZAHh99UyYp23sT3k/VQbouxsNhUWSWaN3YH8mCHK/PAvaoDam2gLrCMg96wB8AN1QrTVjSTUFRNWwWJLKobmxnYHUWBA1XiBe/hVDS1JclFJnQZCWZgQLfnoXPNSoL+1oSR800Ehhdrk4VnITnBCZPZFtJxF7O61mFXItljEQq5CRSlc1l6K5WcpHmW5ClrEi2+szDcmWGHkTN0jIcKPesMUJS9uoqt/A1kbV2awJwy5FzWmxTNomGw6rkw0DNwYL0rDW5Fqg0baGCZXKuLOhsfx8QeqqANL1t/KzBhoYcQmdgEVc7rleWO9lmYcLkm1+B4ixOrypotuqgx7VUFq4sJr6bd9UWwtfGWrhotqCzaqxGaugjfar8cMjeyht1gWH0jpQYxitvrZ+Qy9M6aBBcngXJa/YehWtz4dhvK36swJ79NPjWyckYyZpsgJZUBFr6KN5sL3PnQbl6QoVkwbhLELFGb8egSSdd18x7SMnAmpz0AbGaLCz4lhYzyBV+ZDmH+JpB3rWubRwszQ4pF9i2R75SwOguCTe2o0Crc3rtmyNnJh4Y4IxZI0VFvvIAtcniTvJ6zUGXSlKDE2tgFnhkgcXWRGQ3F9GFr2NeS9uwJDM8LxZGRirBDuZTlawOhFwd1q9f15v9KHKPDS4+YQBGVSFdniiYNKt1coWGbLoBfiQxGhBIahs4CxhfWOTWNvdkFwD2cQR291RswKsVIIIJBB4EVmzbQBXJkQLe/RGXpe8BwOg8qwMXiS5BPtDS/WBuv21R8aW28UEw6j8D9VWCdfx+PjV2JQd5+P8AnUFzMv4BqoMv4Bq2IRc2/d+6hw43X3/NoLvOL2+Rr6JR2+Rqy2G/Gn3V9OG04f3fuoMhZAdLiqZSvXc8BWKrEHSsqFQNeNBkwCwr7JLb8WqxKpcZQfMgDTXUkgV8g2af6vvMsA/fqg2MP6v0hXwYsjivmPvqRw+xCf0uFX52Ii/dJrN2lybWNsvrmDIsDcSud4BI0jO69vCoIJpPHtFUGszEbMVTcYiAn9Xnzf8A6IBrAV7jq6x1GqKJDW9clebCIksU4eMrIocFQpFhJkewIRtbr27uNaIxFxmBK3FwN5F9QD12rouE5yeArzLQw5Ge8krPOyAW5y7/AJtBmBvx6Ngb3EE1h9ry3VSgkkMhUhTYLEGuZC7aFlFrgcWtpVO2EESlY8K2IcNnDTsiYfnDqZpAzKcQ+vzBYAAWtUhsvk1JKp5p+ZkVug5QOihzmlzKx10Ur16rc63EdyyxSs5MUmGdMxRBicPG8aSLZXi54rmhfok5X33FjbdbrwYEmeaGWSeWN5XwzRyZGDlpEZmjbo6C2Y36uFc9GIAArpmBiK4X8pDFA/MYiWUQoiDLGwCA5b3uNd5rmEeJyaBEY9bLmI7gdPhUFyIM/sqW7rn4Cs6LZEh9spEOuR1T4HpHwFYOI2rO/tSt3XCj6K2HwrC5wcTfuqieOEwy/nMVmPVFGzf35Co+Bq0+Owq+xA79ssn7kYX6zUIZh1eZqpMSB8n8eFBKNth96JHH8xAP7zXb41h4jaLt7TlvG9XMFtbm2DrGuYbiRmt3Zr2q5trbr4lkaTUopUbhoTe3nfzqDCiYk9ldH9EUpbFTRWBWSEs/XaMG1j3vbx7K50jipjk5tZ8NOkyEiwKtbijCzDXs+yg6tsvZ7OwCWCmaFHYtYujTBgMvyvZbxPdXY64dya27FJjoWRW5qLMwvvZypRbjcLZidNLgd57ZhZs6huugu0pSgVyz0ieiRcXI2KwbpFM5vIjj8nI3FwQCUc8dCCddDcnqdYONxTLuFB5Z5WcjcZgGRcUAFcHK6EshI3rews3Gx4HvqKaGL/dv/Zkt8GVvrr0JyuxrTxPBLEskbbwRuI3MCNVYcCNa4ltTkvMjHICV4XPSt26AGghzDFweVewqr/HMtfPV4zunHc8ZH+DNWPidmTKdUbyv8RWMUfiD4j76CSXB33SwHvDr8XQCqjgT72H/AGsQ+0VFrGx3m346hUlhSij3j+tr5DhQffUW/qP28X8dPUG/qb9k8H8dHlT3RVppF6vroKv6Ok/qv28H8dfWwsii/QNuqSFj9FXJqwZapM1BlvjCUKHo347vDu7qxcp4MPx3iqTOatluy3dQZSI1icyaW0LC5v1DjQZuLL8fsrDzVUr9dBmgjjIPBWNUPkANixJ67fVVAjvuYeX86py9tUSnJTDGTFLYKcgZznF0BAspYWNxcg242rZTt9czRws0qR/l8VO3t4qWNhzMSgXywiRkAUb7k98fyN2pFCJYpV0kW6sLX5wDoq19Ch7xbUXsxrYthYDCoC6xsDdJzCwYEmO7Qqt9WjLEtfj7PCoMjHbakjfFQI5vHcoQT+dwsGGkZdN4YpOCOOY1BSyvNJzsYzMebEqNqMThJCBHI44ul8hNr6A1f2DsWfnM01i5mmklI1GWXDyAtcb9SPOpbZey2wGGDYlFCgNHG98ruG6ZIjbphL+8Be5uBQYPKUthsEI1EiRy5kjDOSGjUgMACSTHfdfr00tXOJib8a2rlfyhfHz5zoqqFUAWVVA0CrwH403CGjwBNBGCOq1gNT2H2Qx3KamMFyUlfch8qDT0wh6qvps6/Cun7N9HMzWuLVtmzfRio9ug4fDsIt8k1KYPkPJJuRq9CYDkZh4/kg1NwbOjT2VFBwLZ3oid9+YVtWy/QtApBkZz2ZiB8K64BavtBrmxuRmGw/sIK2FFAFhVVKBSlKBVLIDvFVUoMObZsbb1qPxHJeBuFTlKDTsV6P4G/wAqhcX6LEbcRXS6UHG8V6IWPslfhURifRBPwUHyrvdKDzjiPRPixuiJ7qjpvRnjR+hfyNen6UHlKbkDjB+hk+iaw5eR2LH6F/omvXNKDx4/JnEj9C/0TVh9hYgb4X+ia9lV8yjqoPGJ2VMP0T/RP3VQcDIN8b/Rb7q9oc2OoeVfOaXqHkKDxcYG9xvon7qAEfJbyNe0eaX3R5CnNr1DyFB4yRz7rfRP3VmQzuCCM1xuPSBG/ceG817CyDqFfbUHlX+n8ayhc0z2vYZcxF99uiT1VIbK5IbRxzZnWVR78oe5HUoYfdXpulBxvZnokYABiBWy4H0ZQL7RvW/0oNfwfJDDR7kBqWh2fGvsoBWVSg+BQN1faUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoFKUoP/9k="
},function(err,carCreated){
    if(err){
        console.log(err);
    }else{
        console.log("New Car has been entered into DB");
    }
})*/




app.get("/",function(req,res){
    res.render("landing");
})


/*var allCars = [{
    name:"i8",
    company:"BMW",
    price:"$147500",
    image:"data:image/jpeg;base64,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"
}]*/


//INDEX - Show all the cars
app.get("/carsdisplay",function(req,res){
    Car.find({},function(err,allCars){
        if(err){
            console.log(err);
        }else{
            res.render("index",{allCars:allCars});
        }
    });
});


//NEW - To Create new cars
app.get("/carsdisplay/new",function(req,res){
    res.render("new.ejs");
})





//POST - Create a car
app.post("/carsdisplay",function(req,res){
    var company = req.body.company;
    var name = req.body.name;
    var price = req.body.price;
    var image = req.body.image;
    
    var newCarObject = {company:company,name:name,price:price,image:image};
    Car.create(newCarObject,function(err,newlyCreated){
        if(err){
            console.log(err);
        }else{
            console.log("Created a new car and inserted into DB");
            console.log(newlyCreated);
            res.redirect("/carsdisplay");
        }
    })
})


//SHOW ROUTE
app.get("/carsdisplay/:id",function(req,res){
    Car.findById(req.params.id,function(err,allCarsFound){
        if(err){
            console.log(err);
        }else{
            res.render("show",{eachCar:allCarsFound});
        }
    })
})


// EDIT ROUTE
app.get("/carsdisplay/:id/edit",function(req,res){
    Car.findById(req.params.id,function(err,foundCar){
        if(err){
            res.redirect("/carsdisplay");
        }else{
            res.render("edit",{car:foundCar});
        }
    });
});


// UPDATE ROUTE
app.put("carsdisplay/:id",function(req,res){
    Car.findByIdAndUpdate(req.params.id,req.body.car,function(err,updatedCar){
        if(err){
            res.redirect("/carsdisplay");
        }else{
            res.redirect("/carsdisplay/"+req.params.id);
        }
    });
});


// DELETE ROUTE
app.delete("/carsdisplay/:id", function(req,res){
    Car.findByIdAndRemove(req.params.id,function(err){
        if(err){
            res.redirect("/carsdisplay");
        }else{
            res.redirect("/carsdisplay");
        }
    });
});


app.listen(process.env.PORT,process.env.IP,function(){
    console.log("Cars Server has started");
});

